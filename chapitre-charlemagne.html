<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Charlemagne et les Carolingiens - Application d'apprentissage</title>
    
    <!-- PWA Meta tags -->
    <meta name="theme-color" content="#2463EB">
    <meta name="description" content="Apprends l'histoire de Charlemagne et des Carolingiens de mani√®re interactive !">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png">
    <link rel="apple-touch-icon" href="icon-192.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Charlemagne App">
    <link rel="stylesheet" href="charlemagne.css">
</head>
<body>
    <!-- Barre de navigation unique, toujours visible -->
    <div id="main-nav" class="nav-bar" style="justify-content: space-between; padding: 15px;">
        <button class="back-btn" onclick="window.location.href='index.html'">‚Üê Accueil</button>
        <h2 id="page-title"></h2>
    </div>

    <div class="container">
        <!-- Page d'accueil -->
        <div id="home" class="page active">
            <div class="home-page">
                <div class="charlemagne-container">
                    <img src="images/charlemagne.png" alt="Charlemagne" class="charlemagne-image">
                </div>
                <h1>Charlemagne et les Carolingiens</h1>
                <p class="subtitle">Apprends l'histoire de l'Empire carolingien !</p>
                
                <div class="menu-grid">
                    <div class="menu-card" onclick="showPage('lesson')">
                        <div class="icon">
                            <img src="icons/book.svg" alt="Livres" class="icon-img">
                        </div>
                        <h3>La Le√ßon</h3>
                    </div>
                    
                    <div class="menu-card" onclick="showPage('quiz')">
                        <div class="icon">
                            <img src="icons/brain.svg" alt="Cible" class="icon-img">
                        </div>
                        <h3>Quiz</h3>
                    </div>
                    
                    <div class="menu-card" onclick="showPage('timeline')">
                        <div class="icon">
                            <img src="icons/calendar.svg" alt="Calendrier" class="icon-img">
                        </div>
                        <h3>Chronologie</h3>
                    </div>
                </div>
            </div>
        </div>

        <!-- Page Le√ßon -->
        <div id="lesson" class="page">
            <div class="content-wrapper">
                <div class="lesson-content">
                    <h2>H8 - L'empire de Charlemagne et les Carolingiens</h2>
                    
                    <h3>1. De P√©pin le Bref √† Charlemagne</h3>
                    <p>
                        <span class="date-important">En 732</span>, <span class="highlight">Charles Martel</span>, maire du palais, parvient √† repousser les troupes musulmanes √† Poitiers. Il devient un h√©ros. Son fils, <span class="highlight">P√©pin le Bref</span>, se fait couronner roi des Francs en <span class="date-important">751</span> avec le soutien du Pape. Il fonde ainsi la <span class="highlight">dynastie des Carolingiens</span>.
                    </p>
                    
                    <!-- Reste du contenu de la le√ßon inchang√© -->
                    <h3>2. L'Empire de Charlemagne</h3>
                    <p>
                        L'empire de Charlemagne √©tait <span class="highlight">vaste</span>. Il agrandit beaucoup son royaume au cours des guerres successives. Il constitue un immense empire dans lequel il impose la religion chr√©tienne et la capitale est <span class="highlight">Aix-la-Chapelle</span>.
                    </p>
                    
                    <p>
                        Pour bien g√©rer son empire, Charlemagne choisit des hommes fid√®les et leur confie chacun une r√©gion : ce sont les <span class="highlight">comtes</span>. Ces comtes devaient faire appliquer les lois de l'empereur, rendre la justice et organiser l'arm√©e. Charlemagne envoya aussi des <span class="highlight">missi dominici</span> contr√¥ler que les comtes appliquaient ses ordres et respectaient ses autorit√©s.
                    </p>
                    
                    <h3>3. Les actions de Charlemagne dans le royaume de France</h3>
                    <p>
                        Charlemagne n'√©tait pas tr√®s instruit, mais il aimait les arts et la culture. Il a d√©velopp√© les √©coles religieuses et ouvre une √©cole dans son palais. Il demande que des √©coles soient ouvertes dans chaque √©v√™ch√© et chaque monast√®re. Il encourage le d√©veloppement des arts et du savoir. Il favorise le travail des lettr√©s, des peintres, des monast√®res et des architectes.
                    </p>
                    
                    <h3>4. La fin des Carolingiens</h3>
                    <p>
                        <span class="highlight">Louis le Pieux</span> (<span class="date-important">814-840</span>) succ√®de √† Charlemagne. Apr√®s sa mort, ses trois fils (Charles, Louis et Lothaire) se partagent l'empire au <span class="highlight">trait√© de Verdun en 843</span>. Les rois affaiblis ne sont plus ob√©is par les comtes et ne peuvent plus d√©fendre l'empire. Les comtes choisissent un nouveau roi : <span class="highlight">Hugues Capet</span>, premier roi de la dynastie des Cap√©tiens.
                    </p>
                    
                    <h3>üìñ √Ä retenir</h3>
                    <ul>
                        <li><strong>732</strong> : Charles Martel arr√™te les musulmans √† Poitiers</li>
                        <li><strong>751</strong> : P√©pin le Bref devient roi et fonde la dynastie des Carolingiens</li>
                        <li><strong>768 √† 814</strong> : R√®gne de Charlemagne</li>
                        <li><strong>800</strong> : Charlemagne est couronn√© empereur par le Pape L√©on III</li>
                        <li><strong>843</strong> : Trait√© de Verdun - partage de l'empire</li>
                        <li><strong>987</strong> : Fin de la dynastie des Carolingiens</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Page Quiz -->
        <div id="quiz" class="page">
            <div class="content-wrapper">
                <div class="score-live" id="liveScore">Score: 0/11</div>
                
                <div class="quiz-container">
                    <h2>Teste tes connaissances sur Charlemagne !</h2>
                    
                    <!-- Switch pour le mode difficile -->
                    <div class="quiz-mode-switch">
                        <label class="switch-container">
                            <input type="checkbox" id="hardMode" onchange="toggleHardMode()">
                            <span class="switch-slider"></span>
                            <span class="switch-label">Mode difficile (r√©ponses √† saisir)</span>
                        </label>
                    </div>
                    
                    <!-- Contenu du quiz inchang√© -->
                    <div class="question">
                        <h3>Question 1 : En quelle ann√©e Charles Martel a-t-il repouss√© les troupes musulmanes √† Poitiers ?</h3>
                        <div class="options">
                            <label onclick="checkAnswer(this, 'q1', false)">751</label>
                            <label onclick="checkAnswer(this, 'q1', true)">732</label>
                            <label onclick="checkAnswer(this, 'q1', false)">800</label>
                            <label onclick="checkAnswer(this, 'q1', false)">843</label>
                        </div>
                        <div class="explanation" id="exp-q1">
                            ‚ú® C'est en 732 que Charles Martel remporte la bataille de Poitiers, stoppant l'avanc√©e des troupes musulmanes en Europe. Cette victoire lui vaut le surnom de "Martel" (le marteau).
                        </div>
                    </div>

                    <!-- R√©p√©ter pour toutes les questions -->
                    <!-- ... (reste du quiz inchang√©) ... -->
                    
                    <button class="reset-quiz" onclick="resetQuiz()">üîÑ R√©initialiser le quiz</button>
                </div>
            </div>
        </div>

        <!-- Page Chronologie -->
        <div id="timeline" class="page">
            <div class="content-wrapper">
                <div class="timeline-container">
                    <h2>Les dates importantes des Carolingiens</h2>
                    <p class="timeline-hint">üëÜ Clique sur chaque √©v√©nement pour en savoir plus</p>
                    
                    <!-- Contenu de la chronologie inchang√© -->
                    <div class="timeline">
                        <!-- ... (contenu de la chronologie inchang√©) ... -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Script modifi√© pour g√©rer la navigation unique -->
    <script>
        // Charger le reste du JavaScript
        document.addEventListener('DOMContentLoaded', function() {
            // Initialiser le titre de la page d'accueil
            updatePageTitle('home');
        });

        // Fonction de navigation mise √† jour
        function showPage(pageId) {
            // Masquer toutes les pages
            const pages = document.querySelectorAll('.page');
            pages.forEach(page => page.classList.remove('active'));
            
            // Afficher la page demand√©e
            document.getElementById(pageId).classList.add('active');
            
            // Mettre √† jour le titre dans la barre de navigation
            updatePageTitle(pageId);
            
            // D√©filer vers le haut
            window.scrollTo(0, 0);
        }
        
        // Fonction pour mettre √† jour le titre de la page
        function updatePageTitle(pageId) {
            const titleElement = document.getElementById('page-title');
            
            if (pageId === 'home') {
                titleElement.textContent = ''; // Pas de titre sur la page d'accueil
            } else if (pageId === 'lesson') {
                titleElement.textContent = 'üìö La Le√ßon';
            } else if (pageId === 'quiz') {
                titleElement.textContent = 'üéØ Quiz';
            } else if (pageId === 'timeline') {
                titleElement.textContent = 'üìÖ Chronologie';
            }
        }
        
        // Ajouter le reste du JavaScript de votre charlemagne.js ici
        // Variables globales pour le quiz
        let quizScore = 0;
        let answeredQuestions = [];
        let isHardMode = false;

        // Questions et r√©ponses pour le mode difficile
        const hardModeAnswers = {
            'q1': ['732'],
            'q2': ['p√©pin le bref', 'pepin le bref'],
            'q3': ['aix-la-chapelle', 'aix la chapelle'],
            'q4': ['800'],
            'q5': ['missi dominici'],
            'q6': ['trait√© de verdun', 'traite de verdun', 'verdun'],
            'q7': ['p√©pin le bref', 'pepin le bref'],
            'q8': ['louis le pieux'],
            'q9': ['√©coles', 'ecoles'],
            'q10': ['faire appliquer les lois, rendre la justice et organiser l\'arm√©e', 'appliquer les lois', 'rendre la justice', 'organiser l\'arm√©e'],
            'q11': ['987']
        };

        // Basculer entre mode normal et difficile
        function toggleHardMode() {
            // Votre code pour toggleHardMode
        }

        function restoreNormalMode(questionId, optionsDiv) {
            // Votre code pour restoreNormalMode
        }

        // V√©rifier la r√©ponse en mode difficile
        function checkHardAnswer(questionId) {
            // Votre code pour checkHardAnswer
        }

        // Quiz avec feedback imm√©diat
        function checkAnswer(label, questionId, isCorrect) {
            // Votre code pour checkAnswer
        }

        function updateQuizScore() {
            document.getElementById('liveScore').textContent = `Score: ${quizScore}/11`;
        }

        function resetQuiz() {
            // Votre code pour resetQuiz
        }

        // Chronologie interactive
        function toggleTimelineItem(item) {
            // Fermer tous les autres items
            document.querySelectorAll('.timeline-item').forEach(i => {
                if (i !== item) {
                    i.classList.remove('active');
                }
            });
            
            // Basculer l'item cliqu√©
            item.classList.toggle('active');
        }
    </script>
</body>
</html>